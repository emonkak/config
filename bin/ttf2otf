#!/usr/bin/env bash

set -o errexit -o nounset

if [ "${TRACE:-0}" -ne 0 ]
then
  set -o xtrace
fi

SCRIPT=$(cat << EOL
import fontforge
from sys import argv
f = fontforge.open(argv[1])
f.generate(argv[2])
EOL
)

for input in "$@"
do
  if [[ "${input}" =~ ".ttf$" ]]
  then
    echo "Warning: Skipping ${input##*/} (must be .ttf)"
    continue
  fi
  output="${input%.*}.otf"
  fontforge -c "${SCRIPT}" "${input}" "${output}"
done
