#!/usr/bin/env bash

set -o errexit -o nounset

if [ "${TRACE:-0}" -ne 0 ]
then
  set -o xtrace
fi

if [ $# -le 0 ]
then
  echo "Error: Missing files to split." >&2
  exit 1
fi

for f in $@
do
  ffmpeg -i "$f" -c copy -map 0 -f segment -reset_timestamps 1 -segment_time 7199 "${f%.*}_%03d.mp4"
done
