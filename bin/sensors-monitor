#!/usr/bin/env bash

set -o errexit -o nounset

if [ "${TRACE:-0}" -ne 0 ]
then
  set -o xtrace
fi

while true
do
  timestamp="$(date --iso-8601=seconds)"
  sensors "$@" | sed -nE 's/^.*:\s*\+([0-9]+\.[0-9]+)Â°C.*/\1/p' | tr '\n' '\t' | sed -E "s/\t$/\n/; s/^/$timestamp\t/"
  sleep 1
done
